<section class="afishaPage">
    <div class="container">
        <div class="row">
            <div class="col-lg-9 afishaPage__content">
              <div class="" style="display: flex; height: 50px; font-size: 12px; align-items: center;color:#0C8D87;">
                <a href="/afisha" style="color:#0C8D87;"><img src="https://img.icons8.com/ios/18/0C8D87/back-filled.png">Все мероприятия</a>
              </div>
                <div class="col-lg-12 afishaPage__content__category" style="width: 99%;">

                    <ul class="afishaPage__content__category__spis d-flex">
                        <li><a class="afishaPage__content__category__spis__a" href="#">Все актуальные</a></li>
                        <li><a class="afishaPage__content__category__spis__a" href="/dosug?action=dosug&keywords2=afishaType1">Досуг с детьми</a></li>
                        <li><a class="afishaPage__content__category__spis__a" href="#">Выходные</a></li>
                        <li><a class="afishaPage__content__category__spis__a" href="#">Выбрать дату</a></li>
                    </ul>
                </div>
                <div class="col-lg-12 afishaPage__content__posts d-flex">

                  {{#each data.dosug.results}}
                  <div class=" afishaPage__content__posts__item ">
                      <div class="afishaPage__content__posts__item__img" style="background: url({{#if image.secure_url}}{{{image.secure_url}}}{{else}}/img/fonafisha.webp{{/if}}) center center no-repeat;background-size: cover;">
                          {{#if section}}
                          <div class="afishaPage__content__posts__item__category">
                              <h2 class="afishaPage__content__posts__item__category__name">{{section}}</h2>
                          </div>
                          {{/if}}
                      </div>
                      <div class="afishaPage__content__posts__item__content">
                          <h2 class="afishaPage__content__posts__item__content__name">
                              <a href="{{postUrl slug}}">{{{title}}}</a>
                          </h2>
                          {{{content}}}

                      </div>
                  </div>
                  {{/each }}
                </div>

                <div class="tcalendar" style="justify-content: center;display: none;">
                  <form class="" role="afisha" action="/afishaResults" method="get">
                    <input type="hidden" name="action" value="afishaDate">
          					<div class="menuSearchDiv d-flex">
          						<input type="text" name="keywords" placeholder="Выберите дату" class="tcal" value="" style="padding-left: 5px;padding-right: 5px;font-size: 12px;width: 200px;color: #525252;"/>
          						<button id="btn" type="submit">Поиск</button>
          					</div>
          				</form>
              </div>
            </div>
            <div class="col-lg-3 afishaPage__reklama">
              <!-- <div class="reklamaBlock">

                <div id="yandex_rtb_R-A-484761-1"></div>

                <div id="yandex_rtb_R-A-484761-2"></div>
                <script type="text/javascript">
                    (function(w, d, n, s, t) {
                        w[n] = w[n] || [];
                        w[n].push(function() {
                            Ya.Context.AdvManager.render({
                                blockId: "R-A-484761-2",
                                renderTo: "yandex_rtb_R-A-484761-2",
                                async: true
                            });
                        });
                        t = d.getElementsByTagName("script")[0];
                        s = d.createElement("script");
                        s.type = "text/javascript";
                        s.src = "//an.yandex.ru/system/context.js";
                        s.async = true;
                        t.parentNode.insertBefore(s, t);
                    })(this, this.document, "yandexContextAsyncCallbacks");
                </script>
                <div class="" style="margin-top:10px;">
                  {{#each reklama}}
                  <a target="_blank" href="{{{content}}}">
                      <img src="{{{image.secure_url}}}" class="reklamaBlock-img" alt="reklamaBlock">
                  </a>
                  {{/each}}
                </div>
              </div> -->
            </div>
        </div>
    </div>
</section>
<div class="container" style="margin:20px 0;">

</div>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
var afishaPage__content__category__spis__a = document.querySelectorAll('.afishaPage__content__category__spis__a');
var afishaPage__content__posts = document.querySelector('.afishaPage__content__posts');
var pagAfisha = document.querySelector('.pagAfisha');
var tcalendar = document.querySelector('.tcalendar');
var tcalendar2 = document.querySelector('.tcal');
var $spans = $('.afishaPage__content__posts span');
var tcalGrid = document.querySelector('#tcalGrid');
var btn = document.querySelector('#btn');

for (let i = 0; i < afishaPage__content__category__spis__a.length; i++) {
  afishaPage__content__category__spis__a[0].style.color = "#FEBF14";
   afishaPage__content__category__spis__a[i].onclick = () => {
     if (afishaPage__content__category__spis__a[i].innerText == 'Досуг с детьми') {
       tcalendar.style.display = 'none';
       afishaPage__content__posts.innerHTML = '{{#each data.date.results}}{{#if afishaType1}}<div class=" afishaPage__content__posts__item "><div class="afishaPage__content__posts__item__img">{{#if image}}<img src="{{{image.secure_url}}}">{{/if}}{{#if section}}<div class="afishaPage__content__posts__item__category"><h2 class="afishaPage__content__posts__item__category__name">{{section}}</h2></div>{{/if}}</div><div class="afishaPage__content__posts__item__content"><h2 class="afishaPage__content__posts__item__content__name"><a href="{{postUrl slug}}">{{{title}}}</a></h2>{{{content}}}</div></div>{{/if}}{{/each }}';
       pagAfisha.style.display = 'none';
       afishaPage__content__category__spis__a[1].style.color = "#FEBF14";
       afishaPage__content__category__spis__a[0].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[2].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[3].style.color = "#0C8D87";
     }else if (afishaPage__content__category__spis__a[i].innerText == 'Выходные'){
       tcalendar.style.display = 'none';
       afishaPage__content__posts.innerHTML = '{{#each data.date.results}}{{#if afishaType2}}<div class=" afishaPage__content__posts__item "><div class="afishaPage__content__posts__item__img">{{#if image}}<img src="{{{image.secure_url}}}">{{/if}}{{#if section}}<div class="afishaPage__content__posts__item__category"><h2 class="afishaPage__content__posts__item__category__name">{{section}}</h2></div>{{/if}}</div><div class="afishaPage__content__posts__item__content"><h2 class="afishaPage__content__posts__item__content__name"><a href="{{postUrl slug}}">{{{title}}}</a></h2>{{{content}}}</div></div>{{/if}}{{/each }}';
       pagAfisha.style.display = 'none';
       afishaPage__content__category__spis__a[1].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[0].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[2].style.color = "#FEBF14";
       afishaPage__content__category__spis__a[3].style.color = "#0C8D87";
     }else if (afishaPage__content__category__spis__a[i].innerText == 'Выбрать дату'){
       tcalendar.style.display = 'flex';
       afishaPage__content__posts.innerHTML = '';
       pagAfisha.style.display = 'none';
       afishaPage__content__category__spis__a[1].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[0].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[2].style.color = "#0C8D87";
       afishaPage__content__category__spis__a[3].style.color = "#FEBF14";

     }else{
       afishaPage__content__posts.innerHTML = '{{#each data.date.results}}<div class=" afishaPage__content__posts__item "><div class="afishaPage__content__posts__item__img">{{#if image}}<img src="{{{image.secure_url}}}">{{/if}}{{#if section}}<div class="afishaPage__content__posts__item__category"><h2 class="afishaPage__content__posts__item__category__name">{{section}}</h2></div>{{/if}}</div><div class="afishaPage__content__posts__item__content"><h2 class="afishaPage__content__posts__item__content__name"><a href="{{postUrl slug}}">{{{title}}}</a></h2>{{{content}}}</div></div>{{/each }}';
     }
   }
}



for (let i = 0; i < $spans.length; i++) {
  var spans = $spans[i];
  console.log(spans);
  btn.onclick = () => {
   if (spans == tcalendar2.value) {
     console.log(spans);
    afishaPage__content__posts.innerHTML = '{{#each data.date.results}}{{#if afisha}}<div class=" afishaPage__content__posts__item "><div class="afishaPage__content__posts__item__img">{{#if image}}<img src="{{{image.secure_url}}}">{{/if}}{{#if section}}<div class="afishaPage__content__posts__item__category"><h2 class="afishaPage__content__posts__item__category__name">{{section}}</h2></div>{{/if}}</div><div class="afishaPage__content__posts__item__content"><h2 class="afishaPage__content__posts__item__content__name"><a href="{{postUrl slug}}">{{{title}}}</a></h2>{{{content}}}</div></div>{{/if}}{{/each }}';
    tcalendar.style.display = 'none';
  }else{
    console.log(spans);
  }
 }
}
</script>
